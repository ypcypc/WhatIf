**上下文管理**

1. 在编码前加载项目内的 docs 中的介绍文件；
2. 用 ≤ 120 字复述目标；
3. 将大型任务拆分为 < 400 token 的子任务；
4. 通过语义检索获取文档而非粘贴完整文件；
5. 当出现 npm 或者其他 Node.js 相关的命令运行不了的时候，您可以先使用 nvm use 20 的命令来激活 Node.js 相关的命令。

**代码生成**

1. 遵循项目代码风格并在输出前运行格式化和静态检查；
2. 默认先写测试（TDD），除非明确跳过；
3. 静态类型语言中使用显式类型注解；
4. 为每个公共符号添加文档字符串/头注释。

**自我反思与验证**

1. 生成代码并附“思路 + 风险”说明块；
2. 运行第二轮 LLM 对代码逐行点评；
3. 修复直至 ≥ 90 % 问题解决；
4. 执行测试并循环直至全部通过；
5. 当调试无果时应该通过检查调用的源文件或者库来定位问题所在。

**安全与合规**

1. 校验所有粘贴片段的许可证兼容性；
2. 对输入与输出执行漏洞、隐私和策略过滤；
3. 说明外部 API 调用并引用文档；
4. 遇高风险内容即中止并上报人工审核；
5. 对于任何大文件的读取应该分段阅读。

**协作与沟通**

1. 调试时采用“橡皮鸭”式逐步解释；
2. 在多轮对话中保持上下文；
3. 回答应该干净，仅包含思考或者实现的内容，除非请求深入；
4. 代码的更新和添加的 API 应该及时添加到 docs 的相关文件中。
